---
title: "개인 NAS 구축기 - 2장"
tags: [NAS, Linux, Ubuntu] # 태그 입력
categories: NAS
mathjax: false # MathJax 사용을 위한 태그
comments: true
published: true
---

# ODROID-H2+ NAS 사용을 위한 제품들
먼저 ODROID-H2+ 의 보드구조를 살펴보자.

![]('https://cdn.hardkernel.com/wp-content/uploads/2020/06/H2revB_BoardetailA-100x100.jpg')

보드에서 특정 파트를 설명하기 위해 위치한 알파벳 중, 눈여겨 볼 곳은 **E,F,R** 이다. E와 F는 HDD와 연결하는,
각각 전원과 SATA 데이터 통신부이고, R이 팬과 연결되는 부분이다. F의 경우 보통 컴퓨터에서도 사용되는 SATA 케이블을
구하면 끝이지만, 문제는 E와 R. 조금 찾아보니 E는 한국에서 판매하고 있는 걸 발견, 손쉽게 해결할 수 있었지만
R이 쉽지 않았다. 결국 '직구'를 하는 방법으로 해결. 자세한 내용은 아래의 게시글에서 이야기를 하겠다.

# HDD와 연결
## HDD
준비한 하드디스크는 1장에서 언급했듯, 도시바의 P300 (HDWD120), 2TB 제품을 선택했다. 특별히 이 제품을 선택한 이유는
이전에 데이터를 왕창 날려먹으면서 알게된 사실 때문인데, 이 하드디스크의 구조가 바로 CMR이기 때문이었다.
자세한 건 나도 모르지만, 하드디스크 역시 하위 카테고리로 하드웨어적인 구조 차이가 있는데, 최근 생산 방식으로는
SMR이 채택된다고 하며, 장점은 가격은 더 저렴해지는데, 단점은 안정성이 떨어지고 무엇보다 하드디스크 이상증세시
데이터 복구가 힘들다는 점. 이전에 데이터를 날려먹은 하드도 SMR 구조였다. 어느보다도 안정성이 중요한 NAS를 위해서
도시바 P300은 매력적으로 다가왔고, RAID1 구축을 위해 2개를 구매. 이 하드디스크에 대한 자세한 정보는 ['여기'](https://www.toshiba-storage.com/products/toshiba-internal-hard-drives-p300/)에 있으므로 관심있는 분은 참조하면 될 것 같다.

## 케이블
하드디스크가 준비되었으면 보드와 연결할 케이블을 준비해야 한다. 보드의 F부분에 연결할 SATA 케이블은 대부분의 오픈마켓에서
판매하고 있으므로 아무거나 사면 된다. 단, 되도록이면 짧은 케이블을 사는 게 좋다. 선정리가 은근히 문제되기 때문. 나는 50cm 정도 되는
길이의 제품을 마련했지만 이것도 길다고 생각. 진짜 문제는 전원부인 E인데, 이 케이블이 좀 특이하다. 연결 단자부의 사양은
**JST-XH, 2.5mm pitch**으로, 분명 일반적인 이름은 없는 것 같았다. 대충 모양과 길이를 고려하여 찾아본 결과, 국내에 판매하고 있는 제품은
**Coms ND626 SATA 전원 mini 4p 변환 케이블**이 유일 한 것 같았고, 주문했다. 

## 보드와 연결
주문한 케이블을 받고 보드의 E부분에 연결하니 정확하게 일치했다. SATA 케이블 역시 보드의 F부분에 연결하고,
케이블 반대편과 HDD를 연결했다. Fdisk command로 확인해보니 연결된 것을 확인. 이 때 확인해보진 않았지만
아마도 Ubuntu의 disks gui 프로그램에서도 확인할 수 있었을 것 같다.

# FAN과 연결
## FAN
역시 1장에서 길게 언급을 했었는데, 케이스와 보드 사양에 정확하게 맞는 제품이 바로 **NOCTUA NF-A8 5V PWM 80mm**.
여기서도 새로 알게된 점은 대부분 컴퓨터의 FAN은 12V라는 점. 따라서 만약에 보드와 12V 제품을 연결하게 되면
전압부족으로 뻔히 팬의 속도가 느릴게 분명했기에 5V 제품을 샀다. 또한 PWM 기능이라고 해서, 전체명칭은 'Pulse Width Modulation' 인데, 
아마도 펄스의 폭을 조절하여 일부러 팬의 속도를 조절하는 방법으로 보인다. ODROID-H2+ 에서는 보드에 장착된 센서를 통해서
특정 온도에 도달하면 PWM 방법으로 팬의 속도를 조절한다고 한다. 사용한 FAN에 대한 자세한 정보는 ['여기'](https://noctua.at/en/products/fan/nf-a8-5v-pwm)를 참조하면 된다.

## 케이블
하드디스크와 마찬가지로, 여기도 케이블이 큰 문제. 설명으로는 **4pin, 1.25mm pitch** 라고 되어 있었는데, 어떠한 검색어로도
국내에서는 조회되지 않았다. 나는 알리익스프레스에서 검색하여 겨우 구할 수 있었다. 하지만 또다른 문제가 있는데, 이 케이블과 앞의 FAN과 연결하는 것.
다행이도, ['odroid forum'](https://forum.odroid.com/viewtopic.php?t=36030)에 어떤 유저분이 연결하는 방법을 작성해두어 이 부분은 손쉽게 해결.
다만, 구축해보니 문제는 보드와 연결하는 케이블의 두께가 얇아 noctua fan의 접합부와 고정이 잘 되지 않는다는 것.

# 정리
일단 linux에서 RAID 구성법을 정리하려고 일단 3장까지 게시글을 작성하려고 생각중인데, 본업으로 인해 바쁘니... 천천히 시간나는대로 작성해봐야 겠다.